---
- name: Configure AWS credentials
  shell: |
    aws configure set aws_access_key_id "{{ aws_access_key }}"
    aws configure set aws_secret_access_key "{{ aws_secret_key }}"
    aws configure set default.region "{{ aws_region }}"
  changed_when: false

- name: Log in to AWS ECR
  shell: |
    aws ecr get-login-password --region "{{ aws_region }}" | docker login --username AWS --password-stdin "{{ aws_account_id }}.dkr.ecr.{{ aws_region }}.amazonaws.com"
  changed_when: false
